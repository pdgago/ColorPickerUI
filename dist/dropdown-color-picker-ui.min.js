!function(){function a(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)}function b(a){this.options=$.extend(!0,{},this.defaults,a),this._render()}!function(){var a={};this.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("{{").join("	").replace(/((^|\}\})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)\}\}/g,"',$1,'").split("	").join("');").split("}}").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}(),function(a,b,c){function d(b){if(a.event&&a.event.contentOverflow!==c)return{x:a.event.offsetX,y:a.event.offsetY};if(b.offsetX!==c&&b.offsetY!==c)return{x:b.offsetX,y:b.offsetY};var d=b.target.parentNode.parentNode;return{x:b.layerX-d.offsetLeft,y:b.layerY-d.offsetTop}}function e(a,c,d){a=b.createElementNS(r,a);for(var e in c)a.setAttribute(e,c[e]);"[object Array]"!=Object.prototype.toString.call(d)&&(d=[d]);for(var f=0,g=d[0]&&d.length||0;g>f;f++)a.appendChild(d[f]);return a}function f(a){var b,c,d,e,f,g=a.h%360/60;f=a.v*a.s,e=f*(1-Math.abs(g%2-1)),b=c=d=a.v-f,g=~~g,b+=[f,e,0,0,e,f][g],c+=[e,f,f,e,0,0][g],d+=[0,0,e,f,f,e][g];var h=Math.floor(255*b),i=Math.floor(255*c),j=Math.floor(255*d);return{r:h,g:i,b:j,hex:"#"+(16777216|j|i<<8|h<<16).toString(16).slice(1)}}function g(a){var b=a.r,c=a.g,d=a.b;(a.r>1||a.g>1||a.b>1)&&(b/=255,c/=255,d/=255);var e,f,g,h;return g=Math.max(b,c,d),h=g-Math.min(b,c,d),e=0==h?null:g==b?(c-d)/h+(d>c?6:0):g==c?(d-b)/h+2:(b-c)/h+4,e=e%6*60,f=0==h?0:h/g,{h:e,s:f,v:g}}function h(b,e,g){return function(h){h=h||a.event;var i=d(h);b.h=i.y/e.offsetHeight*360+q;var j=f({h:b.h,s:1,v:1}),k=f({h:b.h,s:b.s,v:b.v});g.style.backgroundColor=j.hex,b.callback&&b.callback(k.hex,{h:b.h-q,s:b.s,v:b.v},{r:k.r,g:k.g,b:k.b},c,i)}}function i(b,c){return function(e){e=e||a.event;var g=d(e),h=c.offsetWidth,i=c.offsetHeight;b.s=g.x/h,b.v=(i-g.y)/i;var j=f(b);b.callback&&b.callback(j.hex,{h:b.h-q,s:b.s,v:b.v},{r:j.r,g:j.g,b:j.b},g)}}function j(a,b,c){if(!(this instanceof j))return new j(a,b,c);if(this.h=0,this.s=1,this.v=1,c)this.callback=c,this.pickerElement=b,this.slideElement=a;else{var d=a;d.innerHTML=s,this.slideElement=d.getElementsByClassName("slide")[0],this.pickerElement=d.getElementsByClassName("picker")[0];var e=d.getElementsByClassName("slide-indicator")[0],f=d.getElementsByClassName("picker-indicator")[0];j.fixIndicators(e,f),this.callback=function(a,c,d,g,h){j.positionIndicators(e,f,h,g),b(a,c,d)}}if("SVG"==p){var g=o.cloneNode(!0),m=n.cloneNode(!0),q=g.getElementById("gradient-hsv"),r=g.getElementsByTagName("rect")[0];q.id="gradient-hsv-"+t,r.setAttribute("fill","url(#"+q.id+")");var u=[m.getElementById("gradient-black"),m.getElementById("gradient-white")],v=m.getElementsByTagName("rect");u[0].id="gradient-black-"+t,u[1].id="gradient-white-"+t,v[0].setAttribute("fill","url(#"+u[1].id+")"),v[1].setAttribute("fill","url(#"+u[0].id+")"),this.slideElement.appendChild(g),this.pickerElement.appendChild(m),t++}else this.slideElement.innerHTML=o,this.pickerElement.innerHTML=n;k(this.slideElement,"click",h(this,this.slideElement,this.pickerElement)),k(this.pickerElement,"click",i(this,this.pickerElement)),l(this,this.slideElement,h(this,this.slideElement,this.pickerElement)),l(this,this.pickerElement,i(this,this.pickerElement))}function k(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)}function l(a,b,c){var d=!1;k(b,"mousedown",function(){d=!0}),k(b,"mouseup",function(){d=!1}),k(b,"mouseout",function(){d=!1}),k(b,"mousemove",function(a){d&&c(a)})}function m(a,b,c,d){a.h=b.h%360,a.s=b.s,a.v=b.v;var e=f(a),g={y:a.h*a.slideElement.offsetHeight/360,x:0},h=a.pickerElement.offsetHeight,i={x:a.s*a.pickerElement.offsetWidth,y:h-a.v*h};return a.pickerElement.style.backgroundColor=f({h:a.h,s:1,v:1}).hex,a.callback&&a.callback(d||e.hex,{h:a.h,s:a.s,v:a.v},c||{r:e.r,g:e.g,b:e.b},i,g),a}var n,o,p=a.SVGAngle||b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",q=15,r="http://www.w3.org/2000/svg",s=['<div class="picker-wrapper">','<div class="picker"></div>','<div class="picker-indicator"></div>',"</div>",'<div class="slide-wrapper">','<div class="slide"></div>','<div class="slide-indicator"></div>',"</div>"].join("");"SVG"==p?(o=e("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[e("defs",{},e("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[e("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),e("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),e("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),e("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),e("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),e("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),e("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),e("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),e("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]),n=e("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[e("defs",{},[e("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[e("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"}),e("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),e("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),e("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})])):"VML"==p&&(o=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>',"</v:rect>","</DIV>"].join(""),n=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>",'<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>","</DIV>"].join(""),b.namespaces.v||b.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"));var t=0;j.hsv2rgb=function(a){var b=f(a);return delete b.hex,b},j.hsv2hex=function(a){return f(a).hex},j.rgb2hsv=g,j.rgb2hex=function(a){return f(g(a)).hex},j.hex2hsv=function(a){return g(j.hex2rgb(a))},j.hex2rgb=function(a){return{r:parseInt(a.substr(1,2),16),g:parseInt(a.substr(3,2),16),b:parseInt(a.substr(5,2),16)}},j.prototype.setHsv=function(a){return m(this,a)},j.prototype.setRgb=function(a){return m(this,g(a),a)},j.prototype.setHex=function(a){return m(this,j.hex2hsv(a),c,a)},j.positionIndicators=function(a,b,c,d){c&&(a.style.top=c.y-a.offsetHeight/2+"px"),d&&(b.style.top=d.y-b.offsetHeight/2+"px",b.style.left=d.x-b.offsetWidth/2+"px")},j.fixIndicators=function(a,b){b.style.pointerEvents="none",a.style.pointerEvents="none"},a.ColorPicker=j}(window,window.document);var c={};c["templates/dropdown-template.html"]='<div class="color-picker-ui-dropdown" style="width: {{= width }}px;">\n  <!-- Nav -->\n  <div class="cp-preview">\n    <div class="cp-selected-color" style="background: {{= selected.color }};"></div>\n    <input class="cp-hex-input" type="text" value="{{= selected.color  }}">\n  </div>\n\n  <!-- Content -->\n  <div class="cp-pallete">\n    {{ for (var i = 0; i < pallete.length; i++) { }}\n      <span class="cp-pallete-color cp-hex" data-hex="{{= pallete[i] }}" style="background-color: {{= pallete[i] }};"></span>\n    {{ } }}\n  </div>\n\n  <!-- Menu -->\n  <div class="cp-menu">\n    <div class="cp-menu-item cp-more-colors-btn">\n      {{= texts[lang].moreColors }}...\n      <div class="arrow-icon"></div>\n    </div>\n    <div class="cp-menu-item cp-line-style-btn">\n      {{= texts[lang].lineStyle }}\n      <div class="arrow-icon"></div>\n    </div>\n    {{ if (resetColor) { }}\n      <div class="cp-menu-item cp-reset-btn">{{= texts[lang].reset }}</div>\n    {{ } }}\n  </div>\n</div>',c["templates/line-style-template.html"]='<div class="cp-container cp-line-style-container">\n  <label>{{= texts[lang].stroke }}</label>\n  <select class="cp-stroke">\n    {{ $.each(lineStroke, function(i, stroke) { }}\n      <option value="{{= stroke.toLowerCase() }}" {{= stroke === selected.stroke ? \'selected\' : \'\' }}>{{= texts[lang][stroke] }}</option>\n    {{ }); }}\n  </select>\n\n  <label>{{= texts[lang].thickness }}</label>\n  <select class="cp-thickness">\n    {{ $.each(lineThickness, function(i, thickness) { }}\n      <option value="{{= thickness }}" {{= thickness === selected.thickness ? \'selected\' : \'\' }}>{{= thickness }}px</option>\n    {{ }); }}\n  </select>\n\n  <div class="cp-btn-group">\n    <div class="cp-btn cp-btn-primary cp-btn-apply">{{= texts[lang].apply }}</div>\n    <div class="cp-btn cp-btn-cancel">{{= texts[lang].cancel }}</div>\n  </div>\n</div>\n',c["templates/more-colors-template.html"]='<div class="cp-container cp-more-colors-container">\n  <div class="cp-color-picker-container"></div>\n  <div class="cp-btn-group">\n    <div class="cp-btn cp-btn-primary cp-btn-apply">{{= texts[lang].apply }}</div>\n    <div class="cp-btn cp-btn-cancel">{{= texts[lang].cancel }}</div>\n  </div>\n</div>\n',b.prototype.template=c["templates/dropdown-template.html"],b.prototype.lineStyleTemplate=c["templates/line-style-template.html"],b.prototype.moreColorsTemplate=c["templates/more-colors-template.html"],b.prototype._render=function(){this.$el=$(tmpl(this.template,this.options)),this.$el.appendTo(this.options.container),this._positionate(this.options.trigger,this.options.verticalPosition),this._setEvents("on")},b.prototype._renderStyleLine=function(){{var a=$(tmpl(this.lineStyleTemplate,this.options));a.find(".cp-thickness")}this.$el.html(a),this._setEvents("off"),a.fadeIn(120),this._setLineStyleEvents("on")},b.prototype._renderMoreColors=function(){var a=this,b=$(tmpl(this.moreColorsTemplate,this.options)),c=this.$el.find(".cp-hex-input");this.$el.find(".cp-pallete").remove(),this.$el.find(".cp-menu").remove(),this.$el.append(b);var d=ColorPicker(this.$el.find(".cp-color-picker-container").get(0),function(b){c.blur(),a._previewColor(b),a.options.selected.color=b});d.setHex(this.options.selected.color),b.fadeIn(120),this._setMoreColorsEvents("on")},b.prototype.remove=function(){this._setEvents("off"),this._setLineStyleEvents("off");var a="top"===this.options.verticalPosition?"-5":"5";this.$el.animate({"margin-top":a,opacity:"0"},200,function(){$(this).remove()})},b.prototype._setEvents=function(b){var c=this,d=this.$el.find(".cp-hex-input");d[b]("keyup",function(){var b=$(this).val();"#"!==b[0]&&(b="#"+b,$(this).val(b)),a(b)?c._previewColor(b,!0):c._previewColor(c.options.selected.color,!0)}),d[b]("keypress",function(b){var d;13===b.which&&(d=$(this).val(),d=a(d)?d:c.options.selected.color,c._applyChanges({color:d}))}),this.$el.find(".cp-hex")[b]("click",function(a){c._onClickPalleteColor.apply(c,[a])}),this.$el.find(".cp-hex")[b]("mouseover",function(){var a=$(this).data("hex");d.blur(),c._previewColor(a)}),$(document)[b]("mouseover",function(a){if(!d.is(":focus")){var b=$(a.target);b.hasClass("cp-hex")||c._previewColor(c.options.selected.color)}}),this.options.resetColor&&this.$el.find(".cp-reset-btn")[b]("click",function(){c._applyChanges({color:c.options.resetColor})}),this.$el.find(".cp-line-style-btn")[b]("click",function(){c._renderStyleLine()}),this.$el.find(".cp-more-colors-btn")[b]("click",function(){c._renderMoreColors()})},b.prototype._setLineStyleEvents=function(a){var b=this;this.$el.find(".cp-btn-cancel")[a]("click",function(){b.remove()}),this.$el.find(".cp-btn-apply")[a]("click",function(){var a=b.$el.find(".cp-stroke").val(),c=b.$el.find(".cp-thickness").val();b._applyChanges({storke:a,thickness:c})})},b.prototype._setMoreColorsEvents=function(a){var b=this;this.$el.find(".cp-btn-cancel")[a]("click",function(){b.remove()}),this.$el.find(".cp-btn-apply")[a]("click",function(){b._applyChanges()})},b.prototype._positionate=function(a){if(a){var b,c,d=$(a),e=d.offset(),f=d.outerWidth(),g=d.outerHeight(),h=e.left-this.options.width/2+f/2;0>h&&(h=0),"top"===this.options.verticalPosition?(b=e.top-this.$el.height(),c=b+5):(b=e.top+g,c=b-5),this.$el.css({top:c,opacity:.7}).animate({top:b,opacity:1},100,"linear"),this.$el.css("left",h)}},b.prototype._onClickPalleteColor=function(a){var b=$(a.currentTarget),c=b.data("hex");this._applyChanges({color:c})},b.prototype._applyChanges=function(a){a=a||{},a.color&&(this.options.selected.color=a.color),a.stroke&&(this.options.selected.stroke=a.stroke),a.thickness&&(this.options.selected.thickness=a.thickness),this.options.onPick.apply(this,[this.options.selected]),this.options.trigger&&this.remove()},b.prototype._previewColor=function(a,b){this.$el.find(".cp-selected-color").css("background",a),b||this.$el.find(".cp-hex-input").val(a)},b.prototype.defaults={pallete:["#4527a0","#5e35b1","#7e57c2","#0d47a1","#1565c0","#1e88e5","#33691e","#558b2f","#689f38","#e65100","#ef6c00","#fb8c00","#b71c1c","#d32f2f","#f44336","#9575cd","#b39ddb","#d1c4e9","#42a5f5","#90caf9","#bbdefb","#7cb342","#9ccc65","#c5e1a5","#ff9800","#ffb74d","#ffcc80","#ef5350","#e57373","#ef9a9a"],container:"body",selected:{color:"#000",stroke:"normal",thickness:1},lineStroke:["solid","dash","shortDash","longDash"],lineThickness:[0,1,2,3,4],width:200,lang:"en",resetColor:null,texts:{en:{moreColors:"More colors",lineStyle:"Line style",reset:"Reset",stroke:"Stroke",thickness:"Thickness",cancel:"Cancel",apply:"Apply",solid:"Solid",dash:"Dash",shortDash:"Short dash",longDash:"Long dash"},es:{moreColors:"Más colores",lineStyle:"Estilo de linea",reset:"Restaurar",stroke:"Trazo",thickness:"Grosor",cancel:"Cancelar",apply:"Aplicar",solid:"Solido",dash:"Discontinuo",shortDash:"Discontinuo corto",longDash:"Discontinuo largo"}},onPick:function(){},verticalPosition:"top"},b.setPallete=function(a){return a instanceof Array&&a.length?void(b.prototype.defaults.pallete=a):void console.warn("ColorPickerUi can't set the given pallete. It should be an array.")},b.addLang=function(a,c){return"string"!=typeof a?void console.warn("ColorPickerUi needs a locale string to add a new language."):(c=$.extend(b.prototype.defaults.texts.en,c),void(b.prototype.defaults.texts[a]=c))},b.version="0.0.0","function"==typeof define&&define.amd?define([],function(){return b}):"object"==typeof module&&module.exports&&(module.exports=b),this.ColorPickerUi=b}.call(window);